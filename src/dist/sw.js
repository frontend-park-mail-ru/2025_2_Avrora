const e="homa-offline-v1",t="/index.html";self.addEventListener("install",a=>{a.waitUntil(caches.open(e).then(e=>e.addAll([t,"/","./"]).catch(e=>{})).then(()=>self.skipWaiting()))}),self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(t=>Promise.all(t.map(t=>{if(t!==e)return caches.delete(t)}))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",a=>{const s=a.request,c=new URL(s.url);c.pathname.startsWith("/@vite")||c.pathname.startsWith("/@fs")||c.pathname.startsWith("/api")||"GET"!==s.method||("navigate"!==s.mode?/\.(js|css|png|jpg|jpeg|svg|ico|woff2?|eot|ttf|webp)$/i.test(c.pathname)?a.respondWith(caches.match(s).then(t=>t||fetch(s).then(t=>{if(!t||200!==t.status||"basic"!==t.type)return t;const a=t.clone();return caches.open(e).then(e=>{e.put(s,a).catch(e=>{})}),t}).catch(e=>caches.match(s)))):a.respondWith(caches.match(s).then(e=>e||fetch(s).catch(e=>{}))):a.respondWith(fetch(s).catch(()=>caches.match(t)||caches.match("/")||caches.match("./"))))}),self.addEventListener("message",e=>{"CLEAR_DYNAMIC_CACHE"===e.data&&caches.keys().then(e=>Promise.all(e.map(e=>caches.delete(e)))),"SKIP_WAITING"===e.data&&self.skipWaiting()});
